function displaySelections(e){var t=e.parentNode.querySelector("form");e.className="js-el hidden",t.className=""}function displayElement(e,t){var n=e.parentNode.querySelector("form");e.innerHTML=t,e.className="js-el",n.className="hidden"}function updateTable(e,t,n){var i=e.parentNode.querySelector(".js-el"),o=e.getAttribute("action"),a=e.elements[t].value,l=e.elements[n],s=parseInt(l.value),r=l.options[l.selectedIndex].innerHTML,d=new XMLHttpRequest;return d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||displayElement(i,r)},d.open("GET",o+"?"+t+"="+a+"&"+n+"="+s,!0),d.send(null),!1}function changerDroits(e){return updateTable(e,"login","droits")}function confirm(e){var t=e.parentNode,n=document.createElement("input"),i=document.createElement("input");n.setAttribute("type","submit"),i.setAttribute("type","button"),n.value="Oui",i.value="Non",i.onclick=function(){cancel(e)},e.className="hidden",t.appendChild(n),t.appendChild(i)}function cancel(e){var t=e.parentNode,n=t.querySelector('input[value="Oui"]'),i=t.querySelector('input[value="Non"]');t.removeChild(n),t.removeChild(i),e.className=""}function removeTable(e,t,n){var i=e.getAttribute("action"),o=e.elements[n].value,a=new XMLHttpRequest;return a.onreadystatechange=function(){if(4===a.readyState&&(200===a.status||0===a.status)){var e=JSON.parse(a.responseText),n=e.success,i=e.message;(new MessageEl).displayHiding(new Message(i,3e3)),n&&t.parentNode.removeChild(t)}},a.open("GET",i+"?"+n+"="+o,!0),a.send(null),!1}function removeFilm(e){return removeTable(e,e.parentNode.parentNode.parentNode,"id")}function removeMembre(e){return removeTable(e,e.parentNode.parentNode.parentNode,"login")}function removeDiffusion(e){return removeTable(e,e.parentNode.parentNode.parentNode,"id")}function confirmLink(e){var t=e.parentNode,n=document.createElement("a"),i=e.innerText;return n.className="button no",n.innerHTML="Non",e.innerHTML="Oui",e.className+=" yes",n.onclick=function(){cancelLink(e,i)},e.onclick=null,t.appendChild(n),!1}function cancelLink(e,t){var n=e.parentNode,i=n.childNodes.length,o=n.childNodes[i-1];e.innerText=t,e.className="button",e.onclick=function(){return confirmLink(this)},n.removeChild(o)}function zoom_affiches(){var e,t=[],n=document.getElementsByName("affiche"),i=n.length;for(e=0;e<n.length;e++)n[e].id="affiche"+e,t["affiche"+e]=!1;for(e=0;i>e;e++)n[e].onmouseover=function(){zoom(this)},n[e].onmouseout=function(){t[this.id]||dezoom(this)},n[e].onclick=function(){t[this.id]?(t[this.id]=!1,dezoom(this)):t[this.id]=!0}}function clicdroit(){var e,t=document.images,n=0,i=t.length;for(e=0;i>e;e++)t[e].oncontextmenu=function(){return n++,n>3&&alert("Ce n'est pas la peine d'essayer, tu n'y arriveras pas !"),!1}}function zoom(e){e.className="grande_affiche"}function dezoom(e){e.className="affiche"}function vote(e){e.getElementsByTagName("input")[0].click()}function modifier_affiche(){var e=document.getElementById("buttons"),t=e.getElementsByTagName("button"),n=document.createElement("input"),i=e.getElementsByTagName("input")[0];n.setAttribute("type","file"),n.setAttribute("name","affiche"),i.value="1",t[0].style.display="none",t[1].style.display="none",e.appendChild(n)}function supprimer_affiche(){var e=document.getElementById("buttons"),t=e.getElementsByTagName("button"),n=document.createElement("p"),i=document.createElement("a"),o=document.createElement("button"),a=document.createElement("button");n.textContent="Etes-vous sûr de vouloir supprimer l'affiche ?",t[0].style.display="none",t[1].style.display="none",o.setAttribute("onclick","suppr_affiche(); return false;"),o.innerHTML="Oui",i.setAttribute("href","#boutons"),a.setAttribute("onclick","annule_affiche(); return false;"),a.innerHTML="Non",i.appendChild(a),e.appendChild(n),e.appendChild(o),e.appendChild(a)}function suppr_affiche(){var e=document.getElementById("buttons"),t=e.getElementsByTagName("input")[0],n=e.getElementsByTagName("button"),i=e.getElementsByTagName("p")[0];t.value="2",n[n.length-2].style.display="none",n[n.length-1].style.display="none",i.innerHTML="Affiche supprimée !"}function annule_affiche(){var e=document.getElementById("buttons"),t=e.getElementsByTagName("button"),n=t[0],i=t[1];n.style.display="inline",i.style.display="inline",e.innerHTML="",e.appendChild(n),e.appendChild(i)}function afficheAffiche(e){lightbox.init();var t,n,i=lightbox.getBox(),o=e.getAttribute("data-href");if(o&&""!==o){var a=document.createElement("img");a.src=o,i.appendChild(a),n=.95*lightbox.maxInnerHeight,t=3*n/4}else{var l=document.createElement("p");l.innerHTML="L'affiche n'est actuellement pas disponible pour ce film.",i.appendChild(l),t=.7*lightbox.maxInnerWidth}lightbox.addHideEvents(),lightbox.display(),l&&(n=l.clientHeight),lightbox.setInnerWidth(t),lightbox.setInnerHeight(n)}function afficheSynopsis(e){lightbox.init();var t=lightbox.getBox(),n=e.getAttribute("data-synopsis"),i=document.createElement("blockquote");n&&""!==n?i.className="text-left white-spaces":n="Le synopsis n'est actuellement pas disponible pour ce film.",i.innerHTML=n,t.appendChild(i),lightbox.addHideEvents(),lightbox.display(),lightbox.setInnerWidth(.7*lightbox.maxInnerWidth),lightbox.setInnerHeight(i.clientHeight)}function afficheBandeAnnonce(e,t,n){lightbox.init();var i=lightbox.getBox(),o=e.getAttribute("data-ba"),a=document.createElement("div");if(o&&""!==o){t=t||Math.min(lightbox.maxInnerWidth,16*lightbox.maxInnerHeight/9),n=n||9*t/16,a.className="bande-annonce-lightbox";var l=document.createElement("iframe");o=o.replace(/&amp;/g,"&"),o=o.replace(/&lt;/g,"<"),o=o.replace(/&gt;/g,">"),o=o.replace(/&quot;/g,'"'),l.src=o,l.width=t,l.height=n,a.appendChild(l)}else{a.className="conteneur-lightbox";var s=document.createElement("p");s.innerHTML="La bande-annonce n'est actuellement pas disponible pour ce film.",a.appendChild(s),t=.7*lightbox.maxInnerWidth}i.appendChild(a),lightbox.addHideEvents(),lightbox.display(),lightbox.setInnerWidth(t),lightbox.setInnerHeight(a.clientHeight)}function checkLogin(e){var t=document.getElementById("loginExists");if(!e)return t.innerText="",!1;var n=new XMLHttpRequest;return n.onreadystatechange=function(){4!==n.readyState||200!==n.status&&0!==n.status||(loginExists="Le login est déjà utilisé !"===n.responseText,t.innerText=n.responseText,t.className=loginExists?"exists":"available")},n.open("GET","membres/loginExists?login="+e,!0),n.send(null),loginExists}function loadPage(e,t,n){var i=t-e;if(0===i||0>e||0>t||t>n||e>n)return void console.error("Fonction loadPage utilisée de manière incorrecte.\nArguments :\ncurrentPageNumber = "+e+"\npageNumber = "+t+"\nnbPages = "+n);var o=document.getElementById("seance"+e),a=document.getElementById("seance"+t);if(!o)return void console.error("La page courante que vous appelez n'existe pas.");if(a)return void(0>i?goToPreviousPage(o,a):goToNextPage(o,a));var l;l=new XMLHttpRequest,l.onreadystatechange=function(){if(4===l.readyState&&(200===l.status||0===l.status)){var e=document.createElement("div");e.innerHTML=l.responseText;var t=e.firstElementChild;0>i?goToPreviousPage(o,t):goToNextPage(o,t)}},l.open("GET","index?page="+t+"&isajax=1",!0),l.send(null)}function slidePage(e,t,n,i){e.className="stage-center seance",t.className="seance "+n,document.getElementById("seances").appendChild(t),setTimeout(function(){e.className="seance "+i,t.className="stage-center seance"},0)}function goToPreviousPage(e,t){slidePage(e,t,"stage-left","stage-right")}function goToNextPage(e,t){slidePage(e,t,"stage-right","stage-left")}function onload(){(new MessageEl).hide(),zoom_affiches(),clicdroit()}var cacher_input_voter=!0,lightbox={isInitialized:!1,isHidden:!0,element:null,box:null,topBar:null,closeButton:null,offset:null,maxInnerWidth:0,maxInnerHeight:0,init:function(){this.isInitialized?this.getBox().innerHTML="":(this.addElement(),this.addTopBar(),this.addBox(),this.isInitialized=!0)},display:function(){var e=lightbox.getElement();e.className="visible",this.isHidden=!1},hide:function(e){var t=lightbox.getElement(),n=lightbox.getBox(),i=lightbox.getTopBar(),o=lightbox.getCloseButton();e&&e.target!==t&&e.target!==o&&e.target!==i||(n.innerHTML="",n.setAttribute("style",""),t.className="hidden",this.isHidden=!0)},getElement:function(){return this.element},getBox:function(){return this.box},getTopBar:function(){return this.topBar},getCloseButton:function(){return this.closeButton},addElement:function(){var e=document.createElement("div");e.id="lightbox",document.getElementById("main").appendChild(e),lightbox.element=e},addTopBar:function(){var e=lightbox.getElement(),t=document.createElement("div"),n=document.createElement("div");t.className="lightbox-top-bar",n.className="close",lightbox.topBar=t,lightbox.closeButton=n,t.appendChild(n),e.appendChild(t)},addBox:function(){function e(e,t){var n=e.getPropertyValue("padding-"+t),i=e.getPropertyValue("border-"+t+"-width");return parseFloat(n.substring(0,n.length-2))+parseFloat(i.substring(0,i.length-2))}var t=lightbox.getElement(),n=document.createElement("div");n.className="lightbox-container";var i=window.getComputedStyle(n);lightbox.box=n,t.appendChild(n),lightbox.offset={left:e(i,"left"),top:e(i,"top"),right:e(i,"right"),bottom:e(i,"bottom")},lightbox.maxInnerWidth=document.documentElement.clientWidth-lightbox.offset.left-lightbox.offset.right,lightbox.maxInnerHeight=document.documentElement.clientHeight-lightbox.offset.top-lightbox.offset.bottom},addHideEvents:function(){lightbox.getElement().addEventListener("click",lightbox.hide,!1),lightbox.getCloseButton().addEventListener("click",lightbox.hide,!1),document.addEventListener("keyup",function(e){27===e.keyCode&&lightbox.hide()},!1)},setInnerWidth:function(e){var t=lightbox.getBox();e>lightbox.maxInnerWidth&&(e=lightbox.maxInnerWidth),t.style.width=e+"px"},setInnerHeight:function(e){var t=lightbox.getBox();e>lightbox.maxInnerHeight&&(e=lightbox.maxInnerHeight),t.style.top=(lightbox.maxInnerHeight-e)/2+"px",t.style.height=e+"px"}},loginExists=!0,Message=function(e,t){this.content=e||"",this.hideTimeout=t||3e3},MessageEl=function(){var e=null,t="nav",n="message",i="js-timeout",o=!1;init=function(){e=document.getElementById(n),e||(e=document.createElement(t),e.id=n)},this.hide=function(){var t=parseInt(e.getAttribute(i));e.removeAttribute(i),setTimeout(function(){e.style.display="none",e.innerText=""},t||3e3)},this.display=function(t){if(t&&t.content.length){e.innerText&&e.innerText.length&&(e.innerText+="\n"),o||(document.body.appendChild(e),o=!0),e.style.display="block",e.innerText+=t.content;var n=parseInt(e.getAttribute(i))||0;e.setAttribute(i,n+t.hideTimeout)}},this.displayHiding=function(e){this.display(e),this.hide()},init()};